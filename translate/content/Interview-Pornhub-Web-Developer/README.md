# P 站开发人员访谈

![header.png](https://raw.githubusercontent.com/LuckRain7/Knowledge-Sharing/master/translate/content/Interview-Pornhub-Web-Developer/header.png)

> 最近，我有幸采访到了一位P站的 Web 开发人员，我想了解技术，如何改进 Web API 以及在P站工作的感觉。
>
> 无论您对有色内容持有何种立场，都无法否认有色网站行业对推动网络发展具有巨大影响。 从提高浏览器的视频限制到通过 WebSocket 推送广告，使广告拦截器无法检测到它们， 都需时刻地在网络的前沿进行创新。
>
> 注意：有色行业非常有竞争力，因此存在一些无法回答的问题。 我尊重他们的意愿。



Q：网站显然会显示许多图形内容。 在开发过程中，您是否使用大量的图像和视频占位符？ 开发内容和体验离最终产品有多远？

A：实际上，我们在开发网站时不使用占位符！ 最后，重要的是代码和功能，界面是我们现在非常习惯的东西。 一开始肯定会有一些学习曲线，但是我们大家很快就习惯了。

---

Q：对于直播和第三方广告脚本，您如何在网站和功能开发过程中模拟如此重要的动态资源？

A：为了进行开发，播放器分为两个部分。 基本播放器实现核心功能并触发事件。 开发是在纯净的环境中完成的。为了在网站上进行集成，我们希望运行那些第三方脚本和广告，以便我们尽早发现问题。 在特殊情况下，我们将与广告客户合作，允许我们随机进行手动触发。

---

Q：一个平均页面可能至少包含一个视频，GIF广告，一些直播 以及其他视频的缩略图。 您如何衡量页面性能以及如何使页面保持最佳性能？ 您可以分享任何技巧吗？

A：我们使用一些测量系统。

- 我们的播放器会向我们返回有关视频回放性能和一般使用的指标的数据。
- 使用第三方 RUM 系统进行监控通用的网页性能指标。
- WebpageTest 私有实例可以在可用的 AWS 数据中心中编写测试脚本。 我们主要将其用于查看给定时间可能发生的情况。 它还使我们能够查看来自不同地区和不同用户的报告。

---

Q：我个人认为前端最重要，最复杂的功能是视频播放器。 从在视频之前加入广告，标记视频的精彩时刻，更改视频速度和其他功能，您如何维护该功能的性能，功能和稳定性？

A：我们有一支专门负责视频播放器的团队，他们的首要任务是不断监控性能和效率。 为此，我们几乎使用了所有可用的东西。 浏览器性能工具，网页测试，指标等。我们进行的所有更新都会通过可靠的质量测试来确保稳定性和质量。

---

Q：专门的视频团队有多少人？ 团队中有多少前端开发人员？

A：我只能说，鉴于产品的规模，这支团队规模倾向于平均水平。

---

Q：在P站上工作期间，您如何看待前端环境的变化？ 哪些新的Web API可以使您的工作更轻松？

A：我肯定在前端环境的每个方面都看到了很多改进；

- 从纯CSS到最终使用 less 和 Mixins，再到具有媒体查询和图片标签的灵活 Grid 系统，以适应不同的分辨率和屏幕尺寸。
- jQuery 和 jQueryUI 正在慢慢远离，所以我们要回到更高效的面向对象的 vanilla JS 编程。框架在某些情况下也是非常有趣的。
- 我们喜欢新的 IntersectionObserver API，它对有效的加载图像非常的有用。
- 我们也开始使用 Picture-in-Picture API，以便在我们的某些页面上显示浮动视频，主要是为了获得用户对该想法的反馈。

---

Q：展望未来，有没有您想要更改，改进甚至新创建的Web API？

A：我们希望其中的一些更改或改进；Beacon, WebRTC, Service Workers and Fetch:

- Beacon：一些IOS方面的问题，在 pageHide 事件中它不能正常工作
- Fetch：没有办法获取下载进度，也没有提供拦截请求的方法
- WebRTC：如果分辨率不够大，即使对于屏幕共享，同步直播层也是有限的
- Service Workers：任何 Service Workers 的 Fetch 事件处理程序均不会拦截对navigator.serviceWorker.register 的调用

---

Q：WebVR 在过去几年中一直在不断的发展——WebVR 在当前状态下有多有用？P站为支持 VR 内容付出了多少努力？在P站上，触觉在WebVR中是否有作用？

A：我们正在研究 WebXR，以及如何最好地适应新兴的空间计算方案，作为最大的内容分发平台，我们需要支持创作者和用户，无论他们想如何体验我们的内容。 但是，我们仍在探索用这些新媒体去展示什么样的内容和平台。

我们是第一个支持VR，计算机视觉和虚拟表演者的主要平台，并将继续推动新技术和 Web 的发展。

---

Q：每个页面上的媒体和内容种类繁多，那么桌面端和移动设备之间最大的考虑是什么？

A：功能主要受操作系统和浏览器类型的限制。 当涉及到完全不同的访问和功能集时，iOS vs Android是一个完美的例子。

例如，某些 iOS 移动设备不允许我们在全屏模式下使用自定义视频播放器，而是强制使用本机 QuickTime 播放器。 我们提出新想法时必须考虑这一点。 另一方面，Android 为我们提供了完全的控制权，可以在全屏模式下很好的使用我们播放器的功能。

HLS 中的自适应流式传输也是另一个问题，当涉及到 HLS 流式传输质量时，IE 和 Edge 是很挑剔的，我们需要注意质量较高的流媒体，否则视频会出现卡顿和失真。

---

Q：当前P站最低兼容什么浏览器？ Internet Explorer是否已淘汰？

A：我们对 IE 的已经支持了很长时间了，但是最近不再支持 IE11 之前的任何版本，我们也停止使用Flash。 

我们主要专注于 Chrome，Firefox 和 Safari。

---

Q：更广泛地说，您可以分享一些有关P站的信息吗？ 服务器技术或前端技术？ 您正在使用哪些库？

A：我们的大多数网站都以下内容为基础：

- Nginx
- PHP
- MySQL
- Memcached and/or Redis

在适当的地方使用其他技术，例如Varnish，ElasticSearch，NodeJS，Go，Vertica。

对于前端，我们主要运行原始的 Javascript，我们逐渐摆脱了 jQuery，我们才刚刚开始使用框架，主要是Vue.js

---

Q：从局外人的角度来看，有色网站通常看起来非常相似：许多视频缩略图，聚合的视频内容，直播，广告。 作为从事这些工作的人，使有色网站与众不同的特征是什么？

A：我们非常努力地为每个品牌提供不同层次的独特性； 内容库，UX 和功能集以及许多不同的算法。

---

Q：在加入P站之前，您对可能在有色网站上工作有何想法？ 你有犹豫吗？ 如果有，你如何消除恐惧？

A：这个问题没有困扰我，接受挑战是如此的吸引人。 当你想到数以百万计的人会使用我开发的产品时，这个想法确实令人鼓舞。事实证明的确如此，我第一次从事的工作上线了，我感到非常自豪，我的确告诉所有朋友去看看！ 同时，P站永远不会死的事实也确保了工作的稳定性！

---

Q：就最终产品而言，分享你在有色网站上工作，可能与其他工作不一样。 告诉朋友、家人和熟人你在有色网站工作会不会有耻辱感？在告诉别人你在成人网站工作时是否会有任何犹豫？

A：我为能够开发这些产品感到非常自豪，与我亲近的人都知道我的工作内容。 它始终是交谈，笑话的绝佳来源，而且确实很有趣。

---

Q：在互联网公司工作和在P站工作时气氛是否有所不同？

A：我们与后端开发人员，测试人员和产品经理平等地合作。在大多数情况下，我们只是在彼此的办公桌前交谈。 聊天（MS团队）、电子邮件非常普遍。

---

Q：最后，作为在P站上工作的前端开发人员，您还想分享什么？

A：能够参与创造如此大规模使用的网站，真的很令人兴奋。 随着技术的不断发展，我们通常处于趋势和技术的重大变革的最前沿，这让我们的工作充满乐趣和挑战。

---

采访结束

我发现我们的采访很有启发性。 我很惊讶他们在开发功能和设计时没有使用占位符。 很高兴看到P站借助WebXR，WebRTC 和 Intersection Observer 继续推动 Web 的前沿发展。 我也很高兴看到他们开始思考Web APIS 并开始删除jQuery。

我真的希望我能够从中获得更多具体的技术建议。 我相信他们的源代码背后有很多知识要学习！ 您会问什么问题？





> 原文地址：[https://davidwalsh.name/pornhub-interview](https://davidwalsh.name/pornhub-interview)
>
> *By* [David Walsh](http://davidwalsh.name/) *on* October 7, 2019  

